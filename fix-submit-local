#!/bin/bash

# Fix and Submit Local Script for Google Colab
# This script fixes data issues and submits to elephant-cli

echo "ğŸš€ Starting fix and submit local process..."
echo "ğŸ”§ Will fix source_http_request, request_identifier, and other issues"
echo "ğŸ“ Processes data from output/ to submit-photo/"
echo "ğŸ” Runs elephant-cli validation with auto-fixes"

# Check if we're in the right directory
if [ ! -d "output" ]; then
    echo "âŒ Error: output/ directory not found!"
    echo "Please run this script from the project root directory"
    exit 1
fi

echo "ğŸ“‹ Step 1: Loading property CIDs from upload-results.csv..."
echo "ğŸ“ Step 2: Copying data from output/ to submit-photo/"
echo "ğŸ”§ Step 3: Fixing source_http_request and other issues..."
echo "ğŸ”§ Step 4: Ensuring layout files have required fields..."
echo "ğŸ”„ Step 5: Renaming folders to propertyCID..."
echo "ğŸ” Step 6: Running CLI validation iteratively..."

# Run the fix and submit local script
python fix_and_submit_local.py

echo "âœ… Fix and submit local process completed!"
echo "ğŸ“ Results in submit-photo/ directory"
echo "ğŸ“Š Check submit_errors.csv for any remaining issues" 