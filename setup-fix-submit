#!/bin/bash

# Setup script for fix_and_submit_local.py
# Installs all required dependencies

echo "🚀 Setting up dependencies for fix_and_submit_local.py..."

# Install Python dependencies
echo "📦 Installing Python packages..."
pip install openai requests

# Check if elephant-cli is installed
if ! command -v npx &> /dev/null; then
    echo "❌ Error: npx not found. Please install Node.js first."
    echo "Visit: https://nodejs.org/"
    exit 1
fi

# Install elephant-cli if not already installed
echo "📦 Installing elephant-cli..."
npx @elephant-xyz/cli@latest --version

# Check for required files
echo "📋 Checking required files..."

if [ ! -f ".env" ]; then
    echo "⚠️  Warning: .env file not found"
    echo "📝 Create .env file with: OPENAI_API_KEY=your-api-key-here"
fi

if [ ! -f "upload-results.csv" ]; then
    echo "⚠️  Warning: upload-results.csv not found"
    echo "📝 This file is needed for property CID mapping"
fi

if [ ! -d "output" ]; then
    echo "⚠️  Warning: output/ directory not found"
    echo "📁 This directory should contain processed data"
fi

echo "✅ Setup completed!"
echo "🚀 You can now run: python fix_and_submit_local.py" 